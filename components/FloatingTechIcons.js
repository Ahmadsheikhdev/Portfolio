import { useEffect, useState } from 'react';
import { motion, useScroll, useTransform } from 'framer-motion';

const FloatingTechIcons = () => {
  const { scrollY } = useScroll();
  const [windowDimensions, setWindowDimensions] = useState({
    width: typeof window !== 'undefined' ? window.innerWidth : 0,
    height: typeof window !== 'undefined' ? window.innerHeight : 0,
  });

  // Create different motion values for various icons
  const y1 = useTransform(scrollY, [0, 1500], [0, -300]);
  const y2 = useTransform(scrollY, [0, 1500], [0, 400]);
  const y3 = useTransform(scrollY, [0, 1500], [0, -200]);
  const y4 = useTransform(scrollY, [0, 1500], [0, 250]);
  const y5 = useTransform(scrollY, [0, 1500], [0, -350]);
  const y6 = useTransform(scrollY, [0, 1500], [0, 300]);
  
  const rotate1 = useTransform(scrollY, [0, 1000], [0, 360]);
  const rotate2 = useTransform(scrollY, [0, 1000], [0, -360]);
  const rotate3 = useTransform(scrollY, [0, 1000], [0, 180]);
  
  const scale1 = useTransform(scrollY, [0, 500], [1, 1.2]);
  const scale2 = useTransform(scrollY, [0, 500], [1, 0.8]);
  
  const opacity = useTransform(scrollY, [0, 100, 1200, 1500], [0, 0.3, 0.3, 0]);

  useEffect(() => {
    const handleResize = () => {
      setWindowDimensions({
        width: window.innerWidth,
        height: window.innerHeight,
      });
    };

    window.addEventListener('resize', handleResize);
    return () => window.removeEventListener('resize', handleResize);
  }, []);

  // Tech icons with their positions
  const techIcons = [
    // React
    {
      icon: (
        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" className="w-full h-full">
          <path d="M12 13.5C12.8284 13.5 13.5 12.8284 13.5 12C13.5 11.1716 12.8284 10.5 12 10.5C11.1716 10.5 10.5 11.1716 10.5 12C10.5 12.8284 11.1716 13.5 12 13.5Z" fill="currentColor" />
          <path fillRule="evenodd" clipRule="evenodd" d="M12 21C16.1421 21 19.5 16.9706 19.5 12C19.5 7.02944 16.1421 3 12 3C7.85786 3 4.5 7.02944 4.5 12C4.5 16.9706 7.85786 21 12 21ZM12 16.5C13.6569 16.5 15 14.4853 15 12C15 9.51472 13.6569 7.5 12 7.5C10.3431 7.5 9 9.51472 9 12C9 14.4853 10.3431 16.5 12 16.5Z" fill="currentColor" />
          <path d="M12 21C14.4853 21 16.5 16.9706 16.5 12C16.5 7.02944 14.4853 3 12 3C9.51472 3 7.5 7.02944 7.5 12C7.5 16.9706 9.51472 21 12 21Z" fill="currentColor" fillOpacity="0.2" />
        </svg>
      ),
      position: { left: '10%', top: '20%' },
      motion: { y: y1, rotate: rotate1, scale: scale1 },
      size: 'w-12 h-12',
      color: 'text-blue-500',
    },
    // Node.js
    {
      icon: (
        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" className="w-full h-full">
          <path d="M12 21.8182C11.6486 21.8182 11.3158 21.7273 11 21.5455L8.36842 20.0455C7.94737 19.8182 8.15789 19.7273 8.28947 19.6818C8.81579 19.5 8.89474 19.4545 9.47368 19.1364C9.52632 19.1364 9.60526 19.1364 9.65789 19.1818L11.7368 20.4091C11.8158 20.4545 11.9211 20.4545 12 20.4545C12.0789 20.4545 12.1842 20.4545 12.2632 20.4091L19.0526 16.5C19.1316 16.4545 19.1842 16.3636 19.1842 16.2727V8.45455C19.1842 8.36364 19.1316 8.27273 19.0526 8.22727L12.2632 4.31818C12.1842 4.27273 12.0789 4.27273 12 4.27273C11.9211 4.27273 11.8158 4.27273 11.7368 4.31818L4.94737 8.22727C4.86842 8.27273 4.81579 8.36364 4.81579 8.45455V16.2727C4.81579 16.3636 4.86842 16.4545 4.94737 16.5L7 17.7273C8.10526 18.2727 8.84211 17.6364 8.84211 17V9.27273C8.84211 9.13636 8.94737 9.04545 9.07895 9.04545H9.94737C10.0789 9.04545 10.1842 9.13636 10.1842 9.27273V17C10.1842 18.4091 9.36842 19.2727 8 19.2727C7.57895 19.2727 7.26316 19.2727 6.31579 18.8182L4.36842 17.6364C4.05263 17.4545 3.78947 17.1364 3.63158 16.7727C3.52632 16.5 3.47368 16.2273 3.47368 15.9091V8.81818C3.47368 8.5 3.52632 8.22727 3.63158 8C3.78947 7.63636 4.05263 7.31818 4.36842 7.13636L11.1579 3.22727C11.4737 3.04545 11.8421 2.95455 12.2105 2.95455C12.5789 2.95455 12.9474 3.04545 13.2632 3.22727L20.0526 7.13636C20.3684 7.31818 20.6316 7.63636 20.7895 8C20.8947 8.22727 20.9474 8.5 20.9474 8.81818V15.9091C20.9474 16.2273 20.8947 16.5 20.7895 16.7727C20.6316 17.1364 20.3684 17.4545 20.0526 17.6364L13.2632 21.5455C12.9474 21.7273 12.6316 21.8182 12.2632 21.8182H12Z" fill="currentColor" />
          <path d="M14.7368 15.9091C11.7895 15.9091 11.2105 14.7273 11.2105 13.7273C11.2105 13.5909 11.3158 13.5 11.4474 13.5H12.3158C12.4474 13.5 12.5263 13.5909 12.5263 13.7273C12.6842 14.4091 13.0526 14.7273 14.7368 14.7273C16.0526 14.7273 16.6316 14.5 16.6316 13.7273C16.6316 13.3636 16.4737 13.0909 14.2105 12.9091C12.2632 12.7273 11.0526 12.3636 11.0526 10.9091C11.0526 9.59091 12.1053 8.81818 14.4211 8.81818C16.9474 8.81818 17.9474 9.54545 18.1053 11.0455C18.1053 11.0909 18.1053 11.1364 18.0526 11.1818C18.0526 11.2273 18 11.2727 17.9474 11.2727H17.0789C16.9474 11.2727 16.8684 11.1818 16.8684 11.0909C16.6316 10.3636 16.1579 10.0455 14.4211 10.0455C12.4737 10.0455 12.4211 10.5 12.4211 10.8636C12.4211 11.3182 12.6316 11.4545 14.7895 11.6818C16.9474 11.9091 18 12.2273 18 13.6818C18 15.0909 16.8947 15.9091 14.7368 15.9091Z" fill="currentColor" />
        </svg>
      ),
      position: { right: '15%', top: '15%' },
      motion: { y: y2, rotate: rotate2, scale: scale2 },
      size: 'w-10 h-10',
      color: 'text-green-500',
    },
    // JavaScript
    {
      icon: (
        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" className="w-full h-full">
          <path d="M3 3H21V21H3V3Z" fill="currentColor" />
          <path d="M12 17.5C12.8284 17.5 13.5 16.8284 13.5 16V11.5C13.5 11.2239 13.2761 11 13 11H11C10.7239 11 10.5 11.2239 10.5 11.5V12C10.5 12.2761 10.7239 12.5 11 12.5H12V16C12 16.2761 11.7761 16.5 11.5 16.5C11.2239 16.5 11 16.7239 11 17V17.5C11 17.7761 11.2239 18 11.5 18C11.6648 18 11.8156 17.9473 11.9355 17.8535C11.9559 17.8379 11.9751 17.821 11.9932 17.8029C11.9954 17.8007 11.9977 17.7984 12 17.7962C12.0023 17.7984 12.0046 17.8007 12.0068 17.8029C12.0249 17.821 12.0441 17.8379 12.0645 17.8535C12.1844 17.9473 12.3352 18 12.5 18C12.7761 18 13 17.7761 13 17.5V17C13 16.7239 12.7761 16.5 12.5 16.5" fill="white" />
          <path d="M16.5 17.5V17C16.5 16.7239 16.2761 16.5 16 16.5C15.1716 16.5 14.5 15.8284 14.5 15V14.5C14.5 14.2239 14.7239 14 15 14H16.5C16.7761 14 17 13.7761 17 13.5V13C17 12.7239 16.7761 12.5 16.5 12.5H15C14.7239 12.5 14.5 12.2761 14.5 12V11.5C14.5 11.2239 14.7239 11 15 11H16C16.2761 11 16.5 11.2239 16.5 11.5V12C16.5 12.2761 16.7239 12.5 17 12.5C17.2761 12.5 17.5 12.2761 17.5 12V11.5C17.5 10.6716 16.8284 10 16 10H15C14.1716 10 13.5 10.6716 13.5 11.5V12C13.5 12.8284 14.1716 13.5 15 13.5H15.5V15C15.5 15.2761 15.7239 15.5 16 15.5C16.2761 15.5 16.5 15.7239 16.5 16V16.5C16.5 16.7761 16.2761 17 16 17C15.7239 17 15.5 17.2239 15.5 17.5C15.5 17.7761 15.7239 18 16 18C16.8284 18 17.5 17.3284 17.5 16.5V15.5C17.5 15.2239 17.2761 15 17 15C16.7239 15 16.5 15.2239 16.5 15.5V17.5Z" fill="white" />
        </svg>
      ),
      position: { left: '20%', bottom: '25%' },
      motion: { y: y3, rotate: rotate3, scale: scale1 },
      size: 'w-14 h-14',
      color: 'text-yellow-500',
    },
    // HTML5
    {
      icon: (
        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" className="w-full h-full">
          <path d="M5.08303 3L6.21853 16.5933L11.9998 18.5L17.7811 16.5933L18.9166 3H5.08303ZM16.2561 7.40067L16.0686 9.4L12.0436 10.9993L12.0373 10.9993H15.9436L15.4686 15.5933L12.0436 16.6667L8.60928 15.5933L8.34303 12.6H10.3748L10.5061 14.1L12.0373 14.5667L13.5686 14.1L13.8311 11.5H8.21678L8.03553 9.4L12.0373 7.80067L12.1748 7.80067L16.0686 9.4L16.2561 7.40067Z" fill="currentColor" />
        </svg>
      ),
      position: { right: '25%', bottom: '20%' },
      motion: { y: y4, rotate: rotate1, scale: scale2 },
      size: 'w-12 h-12',
      color: 'text-orange-500',
    },
    // CSS3
    {
      icon: (
        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" className="w-full h-full">
          <path d="M5.08303 3L6.21853 16.5933L11.9998 18.5L17.7811 16.5933L18.9166 3H5.08303ZM16.0686 6.4H12.0373H8.00553L8.17053 8.1H12.0373H15.9041L15.4686 14.3L12.0373 15.4L8.60928 14.3L8.34303 11.4H10.0373H10.3748L10.5061 12.9L12.0373 13.3667L13.5686 12.9L13.8311 10.3H8.21678L8.00553 8.1L8.00553 8.1L7.84053 6.4L7.84053 6.4L7.67553 4.7H12.0373H16.3998L16.0686 6.4Z" fill="currentColor" />
        </svg>
      ),
      position: { left: '15%', top: '60%' },
      motion: { y: y5, rotate: rotate2, scale: scale1 },
      size: 'w-10 h-10',
      color: 'text-blue-500',
    },
    // Docker
    {
      icon: (
        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" className="w-full h-full">
          <path d="M13 7H14V8H13V7Z" fill="currentColor" />
          <path d="M13 4H14V5H13V4Z" fill="currentColor" />
          <path d="M10 7H11V8H10V7Z" fill="currentColor" />
          <path d="M10 4H11V5H10V4Z" fill="currentColor" />
          <path d="M7 7H8V8H7V7Z" fill="currentColor" />
          <path d="M7 4H8V5H7V4Z" fill="currentColor" />
          <path d="M4 7H5V8H4V7Z" fill="currentColor" />
          <path d="M4 4H5V5H4V4Z" fill="currentColor" />
          <path d="M4 10H5V11H4V10Z" fill="currentColor" />
          <path d="M7 10H8V11H7V10Z" fill="currentColor" />
          <path d="M10 10H11V11H10V10Z" fill="currentColor" />
          <path d="M13 10H14V11H13V10Z" fill="currentColor" />
          <path d="M16 10H17V11H16V10Z" fill="currentColor" />
          <path d="M20.8 14.5C20.7839 14.5 20.7674 14.5 20.75 14.5H8.75C8.33579 14.5 8 14.8358 8 15.25C8 16.7688 9.23122 18 10.75 18H11.75C12.9926 18 14 16.9926 14 15.75V15.5H20.75C21.9926 15.5 23 14.4926 23 13.25C23 12.0074 21.9926 11 20.75 11H20.5C20.5 8.51472 18.4853 6.5 16 6.5C15.9326 6.5 15.8656 6.50117 15.7991 6.50348C14.8881 4.4256 12.7849 3 10.375 3C7.09683 3 4.5 5.84675 4.5 9.25C4.5 9.37892 4.50392 9.50677 4.51167 9.63333C2.98303 10.3205 2 11.8291 2 13.5C2 15.7091 3.79086 17.5 6 17.5H7V15.75C7 14.2312 8.23122 13 9.75 13H20.8C21.1866 13 21.5 13.3134 21.5 13.7C21.5 14.0866 21.1866 14.5 20.8 14.5Z" fill="currentColor" />
        </svg>
      ),
      position: { right: '10%', top: '70%' },
      motion: { y: y6, rotate: rotate3, scale: scale2 },
      size: 'w-16 h-16',
      color: 'text-blue-400',
    },
    // MongoDB
    {
      icon: (
        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" className="w-full h-full">
          <path d="M12 2C11.9166 2 11.8333 2.01667 11.7583 2.05C11.6833 2.08333 11.6166 2.13333 11.5583 2.2C10.8916 2.9 10.3 3.63333 9.78329 4.4C9.26663 5.16667 8.82496 5.95833 8.45829 6.775C8.09163 7.59167 7.80829 8.425 7.60829 9.275C7.40829 10.125 7.30829 10.9667 7.30829 11.8C7.30829 12.9 7.49996 13.9417 7.88329 14.925C8.26663 15.9083 8.82496 16.7917 9.55829 17.575C10.2916 18.3583 11.1833 18.9667 12.2333 19.4C12.2333 19.4167 12.2333 19.425 12.2333 19.425V21.8C12.2333 21.8833 12.2583 21.9583 12.3083 22.025C12.3583 22.0917 12.425 22.1417 12.5083 22.175C12.5916 22.2083 12.675 22.225 12.7583 22.225C12.8416 22.225 12.9166 22.2083 12.9833 22.175C13.05 22.1417 13.1083 22.0917 13.1583 22.025C13.2083 21.9583 13.2333 21.8833 13.2333 21.8V19.425C13.2333 19.425 13.2333 19.4167 13.2333 19.4C14.2833 18.9667 15.175 18.3583 15.9083 17.575C16.6416 16.7917 17.2 15.9083 17.5833 14.925C17.9666 13.9417 18.1583 12.9 18.1583 11.8C18.1583 10.9667 18.0583 10.125 17.8583 9.275C17.6583 8.425 17.375 7.59167 17.0083 6.775C16.6416 5.95833 16.2 5.16667 15.6833 4.4C15.1666 3.63333 14.575 2.9 13.9083 2.2C13.85 2.13333 13.7833 2.08333 13.7083 2.05C13.6333 2.01667 13.55 2 13.4666 2H12.5333H12.4666H12.4H12.3333H12.2666H12.2H12.1333H12.0666H12Z" fill="currentColor" />
        </svg>
      ),
      position: { left: '30%', top: '30%' },
      motion: { y: y1, rotate: rotate1, scale: scale1 },
      size: 'w-12 h-12',
      color: 'text-green-500',
    },
    // AWS
    {
      icon: (
        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" className="w-full h-full">
          <path d="M7.5 12.5L6.8 14H6L7.5 10.5H8.5L10 14H9.2L8.5 12.5H7.5ZM7.7 12H8.3L8 11L7.7 12Z" fill="currentColor" />
          <path d="M10 14V10.5H10.8V11H10.9C11 10.7 11.3 10.4 11.8 10.4C12.3 10.4 12.7 10.7 12.8 11.1H12.9C13 10.8 13.4 10.4 14 10.4C14.7 10.4 15.2 10.9 15.2 11.7V14H14.4V11.8C14.4 11.3 14.2 11 13.8 11C13.4 11 13.1 11.3 13.1 11.8V14H12.3V11.8C12.3 11.3 12.1 11 11.7 11C11.3 11 11 11.3 11 11.8V14H10Z" fill="currentColor" />
          <path d="M17.3 14.1C16.5 14.1 15.9 13.4 15.9 12.5C15.9 11.6 16.5 10.9 17.3 10.9C18.1 10.9 18.7 11.6 18.7 12.5C18.7 13.4 18.1 14.1 17.3 14.1ZM17.3 11.5C16.9 11.5 16.6 11.9 16.6 12.5C16.6 13.1 16.9 13.5 17.3 13.5C17.7 13.5 18 13.1 18 12.5C18 11.9 17.7 11.5 17.3 11.5Z" fill="currentColor" />
          <path d="M20.8 14.1C20 14.1 19.4 13.4 19.4 12.5C19.4 11.6 20 10.9 20.8 10.9C21.6 10.9 22.2 11.6 22.2 12.5C22.2 13.4 21.6 14.1 20.8 14.1ZM20.8 11.5C20.4 11.5 20.1 11.9 20.1 12.5C20.1 13.1 20.4 13.5 20.8 13.5C21.2 13.5 21.5 13.1 21.5 12.5C21.5 11.9 21.2 11.5 20.8 11.5Z" fill="currentColor" />
          <path d="M15 17.5C11.5 17.5 9.5 16.5 9.5 16.5V6.5C9.5 6.5 11.5 5.5 15 5.5C18.5 5.5 20.5 6.5 20.5 6.5V16.5C20.5 16.5 18.5 17.5 15 17.5Z" stroke="currentColor" strokeLinecap="round" strokeLinejoin="round" />
          <path d="M9.5 6.5L3.5 9.5L9.5 12.5" stroke="currentColor" strokeLinecap="round" strokeLinejoin="round" />
          <path d="M20.5 6.5L2.5 16" stroke="currentColor" strokeLinecap="round" strokeLinejoin="round" />
        </svg>
      ),
      position: { right: '20%', bottom: '30%' },
      motion: { y: y2, rotate: rotate2, scale: scale2 },
      size: 'w-14 h-14',
      color: 'text-orange-400',
    },
  ];

  return (
    <div className="fixed inset-0 pointer-events-none overflow-hidden">
      {techIcons.map((tech, index) => (
        <motion.div
          key={index}
          className={`absolute ${tech.size} ${tech.color} opacity-0`}
          style={{
            ...tech.position,
            ...tech.motion,
            opacity: opacity,
            zIndex: -1,
          }}
        >
          {tech.icon}
        </motion.div>
      ))}
    </div>
  );
};

export default FloatingTechIcons; 